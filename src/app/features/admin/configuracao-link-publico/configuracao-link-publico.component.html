<div class="configuracao-link-publico">
  <div class="page-header">
    <h1>Configura√ß√£o do Link P√∫blico</h1>
    <p class="subtitle">Personalize a apar√™ncia do seu card√°pio online</p>
  </div>

  @if (loading) {
    <div class="loading-container">
      <p>Carregando configura√ß√µes...</p>
    </div>
  } @else {
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      
      <!-- Se√ß√£o 1: Banners -->
      <section class="config-section">
        <h2>üì∑ Banners</h2>
        <div class="section-content">
          <div class="form-group">
            <label for="bannerUrl">Banner Desktop (URL)</label>
            <input 
              type="url" 
              id="bannerUrl" 
              formControlName="bannerUrl"
              placeholder="https://exemplo.com/banner-desktop.jpg"
              class="form-control">
            <small class="help-text">Tamanho recomendado: 1920x400px</small>
          </div>

          <div class="form-group">
            <label for="bannerMobileUrl">Banner Mobile (URL)</label>
            <input 
              type="url" 
              id="bannerMobileUrl" 
              formControlName="bannerMobileUrl"
              placeholder="https://exemplo.com/banner-mobile.jpg"
              class="form-control">
            <small class="help-text">Tamanho recomendado: 768x300px</small>
          </div>

          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" formControlName="exibirBanner">
              Exibir banner na p√°gina inicial
            </label>
          </div>

          <div class="form-group">
            <label for="mensagemBanner">Mensagem do Banner</label>
            <input 
              type="text" 
              id="mensagemBanner" 
              formControlName="mensagemBanner"
              placeholder="Bem-vindo ao nosso card√°pio!"
              class="form-control">
          </div>
        </div>
      </section>

      <!-- Se√ß√£o 2: Identidade Visual (Logos) -->
      <section class="config-section">
        <h2>üé® Identidade Visual</h2>
        <div class="section-content">
          <div class="form-group">
            <label for="logoUrl">Logo Principal (URL)</label>
            <input 
              type="url" 
              id="logoUrl" 
              formControlName="logoUrl"
              placeholder="https://exemplo.com/logo.png"
              class="form-control">
            <small class="help-text">Formato: PNG transparente, 400x400px</small>
          </div>

          <div class="form-group">
            <label for="logoHeaderUrl">Logo do Header (URL)</label>
            <input 
              type="url" 
              id="logoHeaderUrl" 
              formControlName="logoHeaderUrl"
              placeholder="https://exemplo.com/logo-header.png"
              class="form-control">
            <small class="help-text">Vers√£o horizontal, 200x60px</small>
          </div>

          <div class="form-group">
            <label for="faviconUrl">Favicon (URL)</label>
            <input 
              type="url" 
              id="faviconUrl" 
              formControlName="faviconUrl"
              placeholder="https://exemplo.com/favicon.ico"
              class="form-control">
            <small class="help-text">Formato: ICO ou PNG, 32x32px</small>
          </div>
        </div>
      </section>

      <!-- Se√ß√£o 3: Cores Personalizadas -->
      <section class="config-section">
        <h2>üé® Cores Personalizadas</h2>
        <div class="section-content">
          <div class="colors-grid">
            <div class="form-group color-picker">
              <label for="corPrimaria">Cor Prim√°ria</label>
              <div class="color-input-wrapper">
                <input 
                  type="color" 
                  id="corPrimaria" 
                  formControlName="corPrimaria"
                  class="color-control">
                <input 
                  type="text" 
                  formControlName="corPrimaria"
                  placeholder="#cc0000"
                  class="form-control color-hex"
                  maxlength="7">
              </div>
              @if (form.get('corPrimaria')?.hasError('pattern')) {
                <small class="error-text">Cor inv√°lida (use formato #RRGGBB)</small>
              }
            </div>

            <div class="form-group color-picker">
              <label for="corSecundaria">Cor Secund√°ria</label>
              <div class="color-input-wrapper">
                <input 
                  type="color" 
                  id="corSecundaria" 
                  formControlName="corSecundaria"
                  class="color-control">
                <input 
                  type="text" 
                  formControlName="corSecundaria"
                  placeholder="#ffa000"
                  class="form-control color-hex"
                  maxlength="7">
              </div>
            </div>

            <div class="form-group color-picker">
              <label for="corAcento">Cor de Acento</label>
              <div class="color-input-wrapper">
                <input 
                  type="color" 
                  id="corAcento" 
                  formControlName="corAcento"
                  class="color-control">
                <input 
                  type="text" 
                  formControlName="corAcento"
                  placeholder="#00bfa5"
                  class="form-control color-hex"
                  maxlength="7">
              </div>
            </div>

            <div class="form-group color-picker">
              <label for="corTexto">Cor do Texto</label>
              <div class="color-input-wrapper">
                <input 
                  type="color" 
                  id="corTexto" 
                  formControlName="corTexto"
                  class="color-control">
                <input 
                  type="text" 
                  formControlName="corTexto"
                  placeholder="#212121"
                  class="form-control color-hex"
                  maxlength="7">
              </div>
            </div>

            <div class="form-group color-picker">
              <label for="corFundo">Cor de Fundo</label>
              <div class="color-input-wrapper">
                <input 
                  type="color" 
                  id="corFundo" 
                  formControlName="corFundo"
                  class="color-control">
                <input 
                  type="text" 
                  formControlName="corFundo"
                  placeholder="#ffffff"
                  class="form-control color-hex"
                  maxlength="7">
              </div>
            </div>

            <div class="form-group color-picker">
              <label for="corHeaderBackground">Cor do Header (Fundo)</label>
              <div class="color-input-wrapper">
                <input 
                  type="color" 
                  id="corHeaderBackground" 
                  formControlName="corHeaderBackground"
                  class="color-control">
                <input 
                  type="text" 
                  formControlName="corHeaderBackground"
                  placeholder="#cc0000"
                  class="form-control color-hex"
                  maxlength="7">
              </div>
            </div>

            <div class="form-group color-picker">
              <label for="corHeaderTexto">Cor do Header (Texto)</label>
              <div class="color-input-wrapper">
                <input 
                  type="color" 
                  id="corHeaderTexto" 
                  formControlName="corHeaderTexto"
                  class="color-control">
                <input 
                  type="text" 
                  formControlName="corHeaderTexto"
                  placeholder="#ffffff"
                  class="form-control color-hex"
                  maxlength="7">
              </div>
            </div>
          </div>
          
          <button type="button" class="btn btn-secondary" (click)="resetarCores()">
            Resetar Cores Padr√£o
          </button>
        </div>
      </section>

      <!-- Se√ß√£o 4: Estilo e Layout -->
      <section class="config-section">
        <h2>‚ú® Estilo e Layout</h2>
        <div class="section-content">
          <div class="form-group">
            <label for="estiloBotao">Estilo dos Bot√µes</label>
            <select id="estiloBotao" formControlName="estiloBotao" class="form-control">
              <option value="rounded">Arredondado</option>
              <option value="square">Quadrado</option>
              <option value="pill">P√≠lula (totalmente arredondado)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="estiloCard">Estilo dos Cards</label>
            <select id="estiloCard" formControlName="estiloCard" class="form-control">
              <option value="shadow">Com Sombra</option>
              <option value="border">Com Borda</option>
              <option value="flat">Flat (sem sombra/borda)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="tamanhoFonte">Tamanho da Fonte</label>
            <select id="tamanhoFonte" formControlName="tamanhoFonte" class="form-control">
              <option value="small">Pequeno</option>
              <option value="medium">M√©dio</option>
              <option value="large">Grande</option>
            </select>
          </div>
        </div>
      </section>

      <!-- Se√ß√£o 5: Exibi√ß√£o de Se√ß√µes -->
      <section class="config-section">
        <h2>üëÅÔ∏è Exibi√ß√£o de Se√ß√µes</h2>
        <div class="section-content">
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" formControlName="exibirPromocoes">
              Exibir se√ß√£o de Promo√ß√µes
            </label>
          </div>

          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" formControlName="exibirDestaques">
              Exibir se√ß√£o de Produtos em Destaque
            </label>
          </div>
        </div>
      </section>

      <!-- Se√ß√£o 6: SEO e Meta Tags -->
      <section class="config-section">
        <h2>üîç SEO e Meta Tags</h2>
        <div class="section-content">
          <div class="form-group">
            <label for="metaTitulo">Meta T√≠tulo</label>
            <input 
              type="text" 
              id="metaTitulo" 
              formControlName="metaTitulo"
              placeholder="Card√°pio Online - Nome do Restaurante"
              class="form-control"
              maxlength="60">
            <small class="help-text">M√°ximo 60 caracteres</small>
          </div>

          <div class="form-group">
            <label for="metaDescricao">Meta Descri√ß√£o</label>
            <textarea 
              id="metaDescricao" 
              formControlName="metaDescricao"
              placeholder="Descri√ß√£o que aparece nos resultados de busca..."
              class="form-control"
              rows="3"
              maxlength="160"></textarea>
            <small class="help-text">M√°ximo 160 caracteres</small>
          </div>

          <div class="form-group">
            <label for="metaKeywords">Palavras-chave (Meta Keywords)</label>
            <input 
              type="text" 
              id="metaKeywords" 
              formControlName="metaKeywords"
              placeholder="delivery, pizza, hamburger, restaurante"
              class="form-control">
            <small class="help-text">Separe as palavras por v√≠rgula</small>
          </div>
        </div>
      </section>

      <!-- Se√ß√£o 7: Redes Sociais -->
      <section class="config-section">
        <h2>üì± Redes Sociais</h2>
        <div class="section-content">
          <div class="form-group">
            <label for="urlFacebook">Facebook (URL completa)</label>
            <input 
              type="url" 
              id="urlFacebook" 
              formControlName="urlFacebook"
              placeholder="https://facebook.com/seu-restaurante"
              class="form-control">
          </div>

          <div class="form-group">
            <label for="urlInstagram">Instagram (URL completa)</label>
            <input 
              type="url" 
              id="urlInstagram" 
              formControlName="urlInstagram"
              placeholder="https://instagram.com/seu-restaurante"
              class="form-control">
          </div>

          <div class="form-group">
            <label for="urlTwitter">Twitter (URL completa)</label>
            <input 
              type="url" 
              id="urlTwitter" 
              formControlName="urlTwitter"
              placeholder="https://twitter.com/seu-restaurante"
              class="form-control">
          </div>
        </div>
      </section>

      <!-- Se√ß√£o 8: A√ß√µes -->
      <section class="config-section actions-section">
        <h2>üöÄ A√ß√µes</h2>
        <div class="section-content">
          @if (publicUrl) {
            <div class="public-url-box">
              <label>Link P√∫blico do Card√°pio:</label>
              <div class="url-display">
                <input 
                  type="text" 
                  [value]="publicUrl" 
                  readonly
                  class="form-control">
                <button type="button" class="btn btn-secondary" (click)="copiarLinkPublico()">
                  üìã Copiar Link
                </button>
              </div>
            </div>
          }

          <div class="action-buttons">
            <button type="button" class="btn btn-outline" (click)="abrirPreview()">
              üëÅÔ∏è Visualizar Preview
            </button>
            <button type="submit" class="btn btn-primary" [disabled]="saving || form.invalid">
              @if (saving) {
                Salvando...
              } @else {
                üíæ Salvar Configura√ß√µes
              }
            </button>
          </div>
        </div>
      </section>
    </form>
  }
</div>
